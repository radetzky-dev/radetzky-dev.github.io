<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario</title>
</head>

<body>
    <script>
        "use strict";
        //Calendario
        var weekDays = Array("Dom", "Lun", "Mar", "Mer", "Gio", "Ven", "Sab");
        var months = Array('Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic');
        var monthDays = Array(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);

        const createCalendar = function (calendarName) {
            console.log("Entro nella funzione createCalendar e creo il calendario " + calendarName);
            var monthToShow = months[userMonth - 1];
            var myMonth = months.indexOf(monthToShow);
            var daysOfMyMonth = monthDays[myMonth];
            console.log(monthToShow + " ha " + daysOfMyMonth + " giorni");
            //Date trovare che giorno era 1 mag 2023
            const myDate = new Date(userYear, userMonth - 1, 1);
            var j = myDate.getDay();
            var risposta = "";
            for (var i = 1; i < daysOfMyMonth + 1; i++) {
                j = (j % 7);
                risposta += weekDays[j] + ' ' + i + ' ' + monthToShow + '\n';
                j++;
            }
            console.log(risposta);
        }

        var isCorrectMonth = function (monthNumber) {
            console.log("Entro della funzione isCorrectMonth controllo mese " + monthNumber);
            if (monthNumber < 1 || monthNumber > 12) {
                alert("Devi inserire un valore compreso fra 1 e 12");
                return false;
            }
            return true;
        }

        //controlla che siano stati inserito numeri e che il mese sia compreso fra 1 e 12
        var checkMonthYear = function (userMonth, userYear) {
            if (isNaN(userMonth)) {
                alert("Devi inserire un numero per il mese!");
                throw new Error("Non numerico");
            }
            if (!isCorrectMonth(userMonth)) {
                alert("Il numero del mese non è corretto!");
                throw new Error("Non numerico");
            }
            if (isNaN(userYear)) {
                alert("Devi inserire un numero per l'anno");
                throw new Error("Non numerico");
            }
            return true;
        }

        try {
            //main
            var userMonth = prompt("Inserisci il numero del mese");
            var userYear = prompt("Inserisci l'anno");
            var calendarName = prompt("Dai un nome al tuo calendario");

            if (checkMonthYear(userMonth, userYear)) {
                createCalendar(calendarName);
            }
        }
        catch (ex) {
            console.error("Si è verificato un errore: è stato inserito un valore non numerico", ex.message);
        }

    </script>
</body>

</html>