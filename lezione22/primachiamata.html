<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La prima chiamata</title>
</head>

<body>
    <h1>L'immagine del mio cane</h1>
    <script>
        let callMyApi = "https://dog.ceo/api/breeds/image/random";
        fetch(callMyApi).then(function (response) {
            console.log(response);
            console.log("Risposta status: " + response.status);
            response.json().then(function (json) {
                console.log(json);
                let url = json.message;
                console.log("Indirizzo della foto: " + url);
                //check se img dogphoto esiste
                if (document.getElementById("dogphoto") != null) {
                    //esiste
                    let targetImg = document.getElementById("dogphoto");
                    targetImg.setAttribute("src", url);
                } else {
                    //se non esiste lo creo
                    let targetImg = document.createElement("img");
                    targetImg.setAttribute("id", "dogphoto");
                    targetImg.setAttribute("src", url);
                    document.body.appendChild(targetImg);
                }
            });
        }).catch((errorMessage) => {
            console.log(`Non raggiungibile: ${errorMessage}`);
        });
    </script>

</body>

</html>